{"version":3,"file":"/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/dataloaders/PostLoader.ts","sources":["/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/dataloaders/PostLoader.ts"],"names":[],"mappings":";;AAIA;IAEC,MAAM,CAAC,UAAU,CAAC,IAAe,EAAE,MAAiC,EAAE,eAAgC;QAErG,IAAI,GAAG,GAAa,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEnD,OAAO,OAAO,CAAC,OAAO,CACrB,IAAI,CAAC,OAAO,CAAC;YACZ,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;YAC3B,UAAU,EAAE,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAC,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,UAAU,CAAC,EAAC,CAAC;SAC5F,CAAC,CACF,CAAC;IACH,CAAC;CACD;AAbD,gCAaC","sourcesContent":["import { PostModel, PostInstance } from '../../models/PostModel';\nimport { DataLoaderParam } from '../../interfaces/DataLoaderParamInterface';\nimport { RequestedFields } from '../ast/RequestedFields';\n\nexport class PostLoader {\n\n\tstatic batchPosts(Post: PostModel, params: DataLoaderParam<number>[], requestedFields: RequestedFields): Promise<PostInstance[]> {\n\n\t\tlet ids: number[] = params.map(param => param.key);\n\n\t\treturn Promise.resolve(\n\t\t\tPost.findAll({\n\t\t\t\twhere: { id: { $in: ids } },\n\t\t\t\tattributes: requestedFields.getFields(params[0].info, {keep: ['id'], exclude: ['comments']})\n\t\t\t})\n\t\t);\n\t}\n}"]}