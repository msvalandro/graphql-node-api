"use strict";var cov_o1drf3b95=function(){var path="/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/resources/user/user.resolvers.ts",hash="f97ba89c87e987faa01d0f0e0920c94c46a697a5",global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/resources/user/user.resolvers.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:16},end:{line:3,column:47}},"2":{start:{line:4,column:30},end:{line:4,column:77}},"3":{start:{line:5,column:24},end:{line:5,column:65}},"4":{start:{line:6,column:0},end:{line:96,column:2}},"5":{start:{line:9,column:12},end:{line:16,column:44}},"6":{start:{line:21,column:12},end:{line:27,column:44}},"7":{start:{line:30,column:12},end:{line:30,column:30}},"8":{start:{line:31,column:12},end:{line:39,column:44}},"9":{start:{line:36,column:16},end:{line:36,column:75}},"10":{start:{line:37,column:16},end:{line:37,column:28}},"11":{start:{line:42,column:12},end:{line:49,column:42}},"12":{start:{line:47,column:16},end:{line:47,column:84}},"13":{start:{line:48,column:16},end:{line:48,column:28}},"14":{start:{line:54,column:12},end:{line:58,column:44}},"15":{start:{line:55,column:16},end:{line:56,column:55}},"16":{start:{line:61,column:12},end:{line:69,column:44}},"17":{start:{line:62,column:16},end:{line:67,column:19}},"18":{start:{line:65,column:20},end:{line:65,column:88}},"19":{start:{line:66,column:20},end:{line:66,column:66}},"20":{start:{line:72,column:12},end:{line:81,column:44}},"21":{start:{line:73,column:16},end:{line:79,column:19}},"22":{start:{line:76,column:20},end:{line:76,column:88}},"23":{start:{line:77,column:20},end:{line:78,column:48}},"24":{start:{line:78,column:40},end:{line:78,column:46}},"25":{start:{line:84,column:12},end:{line:93,column:44}},"26":{start:{line:85,column:16},end:{line:91,column:19}},"27":{start:{line:88,column:20},end:{line:88,column:88}},"28":{start:{line:89,column:20},end:{line:90,column:48}},"29":{start:{line:90,column:40},end:{line:90,column:46}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:15},end:{line:8,column:16}},loc:{start:{line:8,column:84},end:{line:17,column:9}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:86},end:{line:28,column:9}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:14},end:{line:29,column:15}},loc:{start:{line:29,column:65},end:{line:40,column:9}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:35,column:22},end:{line:35,column:23}},loc:{start:{line:35,column:32},end:{line:38,column:13}},line:35},"4":{name:"(anonymous_4)",decl:{start:{line:41,column:85},end:{line:41,column:86}},loc:{start:{line:41,column:144},end:{line:50,column:9}},line:41},"5":{name:"(anonymous_5)",decl:{start:{line:46,column:22},end:{line:46,column:23}},loc:{start:{line:46,column:32},end:{line:49,column:13}},line:46},"6":{name:"(anonymous_6)",decl:{start:{line:53,column:20},end:{line:53,column:21}},loc:{start:{line:53,column:57},end:{line:59,column:9}},line:53},"7":{name:"(anonymous_7)",decl:{start:{line:54,column:44},end:{line:54,column:45}},loc:{start:{line:54,column:51},end:{line:57,column:13}},line:54},"8":{name:"(anonymous_8)",decl:{start:{line:60,column:84},end:{line:60,column:85}},loc:{start:{line:60,column:131},end:{line:70,column:9}},line:60},"9":{name:"(anonymous_9)",decl:{start:{line:61,column:44},end:{line:61,column:45}},loc:{start:{line:61,column:51},end:{line:68,column:13}},line:61},"10":{name:"(anonymous_10)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:36},end:{line:67,column:17}},line:64},"11":{name:"(anonymous_11)",decl:{start:{line:71,column:92},end:{line:71,column:93}},loc:{start:{line:71,column:139},end:{line:82,column:9}},line:71},"12":{name:"(anonymous_12)",decl:{start:{line:72,column:44},end:{line:72,column:45}},loc:{start:{line:72,column:51},end:{line:80,column:13}},line:72},"13":{name:"(anonymous_13)",decl:{start:{line:75,column:26},end:{line:75,column:27}},loc:{start:{line:75,column:36},end:{line:79,column:17}},line:75},"14":{name:"(anonymous_14)",decl:{start:{line:78,column:30},end:{line:78,column:31}},loc:{start:{line:78,column:40},end:{line:78,column:46}},line:78},"15":{name:"(anonymous_15)",decl:{start:{line:83,column:84},end:{line:83,column:85}},loc:{start:{line:83,column:126},end:{line:94,column:9}},line:83},"16":{name:"(anonymous_16)",decl:{start:{line:84,column:44},end:{line:84,column:45}},loc:{start:{line:84,column:51},end:{line:92,column:13}},line:84},"17":{name:"(anonymous_17)",decl:{start:{line:87,column:26},end:{line:87,column:27}},loc:{start:{line:87,column:36},end:{line:91,column:17}},line:87},"18":{name:"(anonymous_18)",decl:{start:{line:90,column:30},end:{line:90,column:31}},loc:{start:{line:90,column:40},end:{line:90,column:46}},line:90}},branchMap:{"0":{loc:{start:{line:8,column:24},end:{line:8,column:34}},type:"default-arg",locations:[{start:{line:8,column:32},end:{line:8,column:34}}],line:8},"1":{loc:{start:{line:8,column:36},end:{line:8,column:46}},type:"default-arg",locations:[{start:{line:8,column:45},end:{line:8,column:46}}],line:8},"2":{loc:{start:{line:20,column:26},end:{line:20,column:36}},type:"default-arg",locations:[{start:{line:20,column:34},end:{line:20,column:36}}],line:20},"3":{loc:{start:{line:20,column:38},end:{line:20,column:48}},type:"default-arg",locations:[{start:{line:20,column:47},end:{line:20,column:48}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0],"1":[0],"2":[0],"3":[0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_o1drf3b95.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const utils_1=(cov_o1drf3b95.s[1]++,require("../../../utils/utils"));const composable_resolver_1=(cov_o1drf3b95.s[2]++,require("../../composable/composable.resolver"));const auth_resolver_1=(cov_o1drf3b95.s[3]++,require("../../composable/auth.resolver"));cov_o1drf3b95.s[4]++;exports.userResolvers={User:{posts:(user,{first=(cov_o1drf3b95.b[0][0]++,10),offset=(cov_o1drf3b95.b[1][0]++,0)},{db,requestedFields},info)=>{cov_o1drf3b95.f[0]++;cov_o1drf3b95.s[5]++;return db.Post.findAll({where:{author:user.get('id')},limit:first,offset:offset,attributes:requestedFields.getFields(info,{keep:['id'],exclude:['comments']})}).catch(utils_1.handleError);}},Query:{users:(parent,{first=(cov_o1drf3b95.b[2][0]++,10),offset=(cov_o1drf3b95.b[3][0]++,0)},{db,requestedFields},info)=>{cov_o1drf3b95.f[1]++;cov_o1drf3b95.s[6]++;return db.User.findAll({limit:first,offset:offset,attributes:requestedFields.getFields(info,{keep:['id'],exclude:['posts']})}).catch(utils_1.handleError);},user:(parent,{id},{db,requestedFields},info)=>{cov_o1drf3b95.f[2]++;cov_o1drf3b95.s[7]++;id=parseInt(id);cov_o1drf3b95.s[8]++;return db.User.findById(id,{attributes:requestedFields.getFields(info,{keep:['id'],exclude:['posts']})}).then(user=>{cov_o1drf3b95.f[3]++;cov_o1drf3b95.s[9]++;utils_1.throwError(!user,`User with id ${id} not found.`);cov_o1drf3b95.s[10]++;return user;}).catch(utils_1.handleError);},currentUser:composable_resolver_1.compose(...auth_resolver_1.authResolvers)((parent,args,{db,authUser,requestedFields},info)=>{cov_o1drf3b95.f[4]++;cov_o1drf3b95.s[11]++;return db.User.findById(authUser.id,{attributes:requestedFields.getFields(info,{keep:['id'],exclude:['posts']})}).then(user=>{cov_o1drf3b95.f[5]++;cov_o1drf3b95.s[12]++;utils_1.throwError(!user,`User with id ${authUser.id} not found.`);cov_o1drf3b95.s[13]++;return user;}).catch(utils_1.handleError);})},Mutation:{createUser:(parent,{input},{db},info)=>{cov_o1drf3b95.f[6]++;cov_o1drf3b95.s[14]++;return db.sequelize.transaction(t=>{cov_o1drf3b95.f[7]++;cov_o1drf3b95.s[15]++;return db.User.create(input,{transaction:t});}).catch(utils_1.handleError);},updateUser:composable_resolver_1.compose(...auth_resolver_1.authResolvers)((parent,{input},{db,authUser},info)=>{cov_o1drf3b95.f[8]++;cov_o1drf3b95.s[16]++;return db.sequelize.transaction(t=>{cov_o1drf3b95.f[9]++;cov_o1drf3b95.s[17]++;return db.User.findById(authUser.id).then(user=>{cov_o1drf3b95.f[10]++;cov_o1drf3b95.s[18]++;utils_1.throwError(!user,`User with id ${authUser.id} not found.`);cov_o1drf3b95.s[19]++;return user.update(input,{transaction:t});});}).catch(utils_1.handleError);}),updateUserPassword:composable_resolver_1.compose(...auth_resolver_1.authResolvers)((parent,{input},{db,authUser},info)=>{cov_o1drf3b95.f[11]++;cov_o1drf3b95.s[20]++;return db.sequelize.transaction(t=>{cov_o1drf3b95.f[12]++;cov_o1drf3b95.s[21]++;return db.User.findById(authUser.id).then(user=>{cov_o1drf3b95.f[13]++;cov_o1drf3b95.s[22]++;utils_1.throwError(!user,`User with id ${authUser.id} not found.`);cov_o1drf3b95.s[23]++;return user.update(input,{transaction:t}).then(user=>{cov_o1drf3b95.f[14]++;cov_o1drf3b95.s[24]++;return!!user;});});}).catch(utils_1.handleError);}),deleteUser:composable_resolver_1.compose(...auth_resolver_1.authResolvers)((parent,args,{db,authUser},info)=>{cov_o1drf3b95.f[15]++;cov_o1drf3b95.s[25]++;return db.sequelize.transaction(t=>{cov_o1drf3b95.f[16]++;cov_o1drf3b95.s[26]++;return db.User.findById(authUser.id).then(user=>{cov_o1drf3b95.f[17]++;cov_o1drf3b95.s[27]++;utils_1.throwError(!user,`User with id ${authUser.id} not found.`);cov_o1drf3b95.s[28]++;return user.destroy({transaction:t}).then(user=>{cov_o1drf3b95.f[18]++;cov_o1drf3b95.s[29]++;return!!user;});});}).catch(utils_1.handleError);})}};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvbXN2YWxhbmRyby9Eb2N1bWVudHMvcmVwby9ncmFwaHFsLW5vZGUtYXBpL3NyYy9ncmFwaHFsL3Jlc291cmNlcy91c2VyL3VzZXIucmVzb2x2ZXJzLnRzIiwic291cmNlcyI6WyIvaG9tZS9tc3ZhbGFuZHJvL0RvY3VtZW50cy9yZXBvL2dyYXBocWwtbm9kZS1hcGkvc3JjL2dyYXBocWwvcmVzb3VyY2VzL3VzZXIvdXNlci5yZXNvbHZlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSxnREFBK0Q7QUFDL0QsOEVBQStEO0FBRS9ELGtFQUErRDtBQUdsRCxRQUFBLGFBQWEsR0FBRztJQUM1QixJQUFJLEVBQUU7UUFDTCxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBRSxlQUFlLEVBQXVELEVBQUUsSUFBd0IsRUFBRSxFQUFFO1lBQ2hKLE9BQU8sRUFBRSxDQUFDLElBQUk7aUJBQ1osT0FBTyxDQUFDO2dCQUNSLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDO2dCQUMvQixLQUFLLEVBQUUsS0FBSztnQkFDWixNQUFNLEVBQUUsTUFBTTtnQkFDZCxVQUFVLEVBQUUsZUFBZSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsRUFBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBQyxDQUFDO2FBQ2xGLENBQUM7aUJBQ0QsS0FBSyxDQUFDLG1CQUFXLENBQUMsQ0FBQztRQUN0QixDQUFDO0tBQ0Q7SUFDRCxLQUFLLEVBQUU7UUFDTixLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBRSxlQUFlLEVBQXVELEVB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QUM7UUFDRixVQUFVLEVBQUUsNkJBQU8sQ0FBQyxHQUFHLDZCQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBQyxFQUFFLEVBQUUsUUFBUSxFQUF5QyxFQUFFLElBQXdCLEVBQUUsRUFBRTtZQUN4SSxPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBYyxFQUFFLEVBQUU7Z0JBQ2xELE9BQU8sRUFBRSxDQUFDLElBQUk7cUJBQ1osUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7cUJBQ3JCLElBQUksQ0FBQyxDQUFDLElBQWtCLEVBQUUsRUFBRTtvQkFDNUIsa0JBQVUsQ0FBQyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsUUFBUSxDQUFDLEVBQUUsYUFBYSxDQUFDLENBQUM7b0JBQzVELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUMsQ0FBQzt5QkFDbkMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzFCLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDO2lCQUNELEtBQUssQ0FBQyxtQkFBVyxDQUFDLENBQUM7UUFDckIsQ0FBQyxDQUFDO0tBQ0Y7Q0FDRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JhcGhRTFJlc29sdmVJbmZvIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmltcG9ydCB7IERiQ29ubmVjdGlvbiB9IGZyb20gJy4uLy4uLy4uL2ludGVyZmFjZXMvRGJDb25uZWN0aW9uSW50ZXJmYWNlJztcbmltcG9ydCB7IFVzZXJJbnN0YW5jZSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9Vc2VyTW9kZWwnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IsIHRocm93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgeyBjb21wb3NlIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS9jb21wb3NhYmxlLnJlc29sdmVyJztcbmltcG9ydCB7IEF1dGhVc2VyIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJmYWNlcy9BdXRoVXNlckludGVyZmFjZSc7XG5pbXBvcnQgeyBhdXRoUmVzb2x2ZXJzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS9hdXRoLnJlc29sdmVyJztcbmltcG9ydCB7IFJlcXVlc3RlZEZpZWxkcyB9IGZyb20gJy4uLy4uL2FzdC9SZXF1ZXN0ZWRGaWVsZHMnO1xuXG5leHBvcnQgY29uc3QgdXNlclJlc29sdmVycyA9IHtcblx0VXNlcjoge1xuXHRcdHBvc3RzOiAodXNlciwge2ZpcnN0ID0gMTAsIG9mZnNldCA9IDB9LCB7ZGIsIHJlcXVlc3RlZEZpZWxkc306IHtkYjogRGJDb25uZWN0aW9uLCByZXF1ZXN0ZWRGaWVsZHM6IFJlcXVlc3RlZEZpZWxkc30sIGluZm86IEdyYXBoUUxSZXNvbHZlSW5mbykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLlBvc3Rcblx0XHRcdFx0LmZpbmRBbGwoe1xuXHRcdFx0XHRcdHdoZXJlOiB7YXV0aG9yOiB1c2VyLmdldCgnaWQnKX0sXG5cdFx0XHRcdFx0bGltaXQ6IGZpcnN0LFxuXHRcdFx0XHRcdG9mZnNldDogb2Zmc2V0LFxuXHRcdFx0XHRcdGF0dHJpYnV0ZXM6IHJlcXVlc3RlZEZpZWxkcy5nZXRGaWVsZHMoaW5mbywge2tlZXA6IFsnaWQnXSwgZXhjbHVkZTogWydjb21tZW50cyddfSlcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKTtcblx0XHR9XG5cdH0sXG5cdFF1ZXJ5OiB7XG5cdFx0dXNlcnM6IChwYXJlbnQsIHtmaXJzdCA9IDEwLCBvZmZzZXQgPSAwfSwge2RiLCByZXF1ZXN0ZWRGaWVsZHN9OiB7ZGI6IERiQ29ubmVjdGlvbiwgcmVxdWVzdGVkRmllbGRzOiBSZXF1ZXN0ZWRGaWVsZHN9LCBpbmZvOiBHcmFwaFFMUmVzb2x2ZUluZm8pID0+IHtcblx0XHRcdHJldHVybiBkYi5Vc2VyXG5cdFx0XHRcdC5maW5kQWxsKHtcblx0XHRcdFx0XHRsaW1pdDogZmlyc3QsXG5cdFx0XHRcdFx0b2Zmc2V0OiBvZmZzZXQsXG5cdFx0XHRcdFx0YXR0cmlidXRlczogcmVxdWVzdGVkRmllbGRzLmdldEZpZWxkcyhpbmZvLCB7a2VlcDogWydpZCddLCBleGNsdWRlOiBbJ3Bvc3RzJ119KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXHRcdH0sXG5cdFx0dXNlcjogKHBhcmVudCwge2lkfSwge2RiLCByZXF1ZXN0ZWRGaWVsZHN9OiB7ZGI6IERiQ29ubmVjdGlvbiwgcmVxdWVzdGVkRmllbGRzOiBSZXF1ZXN0ZWRGaWVsZHN9LCBpbmZvOiBHcmFwaFFMUmVzb2x2ZUluZm8pID0+IHtcblx0XHRcdGlkID0gcGFyc2VJbnQoaWQpO1x0XHRcdFxuXHRcdFx0cmV0dXJuIGRiLlVzZXJcblx0XHRcdFx0LmZpbmRCeUlkKGlkLCB7XG5cdFx0XHRcdFx0YXR0cmlidXRlczogcmVxdWVzdGVkRmllbGRzLmdldEZpZWxkcyhpbmZvLCB7a2VlcDogWydpZCddLCBleGNsdWRlOiBbJ3Bvc3RzJ119KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQudGhlbigodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG5cdFx0XHRcdFx0dGhyb3dFcnJvcighdXNlciwgYFVzZXIgd2l0aCBpZCAke2lkfSBub3QgZm91bmQuYCk7XG5cdFx0XHRcdFx0cmV0dXJuIHVzZXI7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcik7XG5cdFx0fSxcblx0XHRjdXJyZW50VXNlcjogY29tcG9zZSguLi5hdXRoUmVzb2x2ZXJzKSgocGFyZW50LCBhcmdzLCB7ZGIsIGF1dGhVc2VyLCByZXF1ZXN0ZWRGaWVsZHN9OiB7ZGI6IERiQ29ubmVjdGlvbiwgYXV0aFVzZXI6IEF1dGhVc2VyLCByZXF1ZXN0ZWRGaWVsZHM6IFJlcXVlc3RlZEZpZWxkc30sIGluZm86IEdyYXBoUUxSZXNvbHZlSW5mbykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLlVzZXJcblx0XHRcdFx0LmZpbmRCeUlkKGF1dGhVc2VyLmlkLCB7XG5cdFx0XHRcdFx0YXR0cmlidXRlczogcmVxdWVzdGVkRmllbGRzLmdldEZpZWxkcyhpbmZvLCB7a2VlcDogWydpZCddLCBleGNsdWRlOiBbJ3Bvc3RzJ119KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQudGhlbigodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG5cdFx0XHRcdFx0dGhyb3dFcnJvcighdXNlciwgYFVzZXIgd2l0aCBpZCAke2F1dGhVc2VyLmlkfSBub3QgZm91bmQuYCk7XG5cdFx0XHRcdFx0cmV0dXJuIHVzZXI7XG5cdFx0XHRcdH0pLmNhdGNoKGhhbmRsZUVycm9yKTtcblx0XHR9KVxuXHR9LFxuXHRNdXRhdGlvbjoge1xuXHRcdGNyZWF0ZVVzZXI6IChwYXJlbnQsIHtpbnB1dH0sIHtkYn06IHtkYjogRGJDb25uZWN0aW9ufSwgaW5mbzogR3JhcGhRTFJlc29sdmVJbmZvKSA9PiB7XG5cdFx0XHRyZXR1cm4gZGIuc2VxdWVsaXplLnRyYW5zYWN0aW9uKCh0OiBUcmFuc2FjdGlvbikgPT4ge1xuXHRcdFx0XHRyZXR1cm4gZGIuVXNlclxuXHRcdFx0XHRcdC5jcmVhdGUoaW5wdXQsIHt0cmFuc2FjdGlvbjogdH0pO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcik7XG5cdFx0fSxcblx0XHR1cGRhdGVVc2VyOiBjb21wb3NlKC4uLmF1dGhSZXNvbHZlcnMpKChwYXJlbnQsIHtpbnB1dH0sIHtkYiwgYXV0aFVzZXJ9OiB7ZGI6IERiQ29ubmVjdGlvbiwgYXV0aFVzZXI6IEF1dGhVc2VyfSwgaW5mbzogR3JhcGhRTFJlc29sdmVJbmZvKSA9PiB7XG5cdFx0XHRyZXR1cm4gZGIuc2VxdWVsaXplLnRyYW5zYWN0aW9uKCh0OiBUcmFuc2FjdGlvbikgPT4ge1xuXHRcdFx0XHRyZXR1cm4gZGIuVXNlclxuXHRcdFx0XHRcdC5maW5kQnlJZChhdXRoVXNlci5pZClcblx0XHRcdFx0XHQudGhlbigodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCF1c2VyLCBgVXNlciB3aXRoIGlkICR7YXV0aFVzZXIuaWR9IG5vdCBmb3VuZC5gKTtcblx0XHRcdFx0XHRcdHJldHVybiB1c2VyLnVwZGF0ZShpbnB1dCwge3RyYW5zYWN0aW9uOiB0fSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXHRcdH0pLFxuXHRcdHVwZGF0ZVVzZXJQYXNzd29yZDogY29tcG9zZSguLi5hdXRoUmVzb2x2ZXJzKSgocGFyZW50LCB7aW5wdXR9LCB7ZGIsIGF1dGhVc2VyfToge2RiOiBEYkNvbm5lY3Rpb24sIGF1dGhVc2VyOiBBdXRoVXNlcn0sIGluZm86IEdyYXBoUUxSZXNvbHZlSW5mbykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLnNlcXVlbGl6ZS50cmFuc2FjdGlvbigodDogVHJhbnNhY3Rpb24pID0+IHtcblx0XHRcdFx0cmV0dXJuIGRiLlVzZXJcblx0XHRcdFx0XHQuZmluZEJ5SWQoYXV0aFVzZXIuaWQpXG5cdFx0XHRcdFx0LnRoZW4oKHVzZXI6IFVzZXJJbnN0YW5jZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcighdXNlciwgYFVzZXIgd2l0aCBpZCAke2F1dGhVc2VyLmlkfSBub3QgZm91bmQuYCk7XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRyZXR1cm4gdXNlci51cGRhdGUoaW5wdXQsIHt0cmFuc2FjdGlvbjogdH0pXG5cdFx0XHRcdFx0XHRcdC50aGVuKCh1c2VyOiBVc2VySW5zdGFuY2UpID0+ICEhdXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXHRcdH0pLFxuXHRcdGRlbGV0ZVVzZXI6IGNvbXBvc2UoLi4uYXV0aFJlc29sdmVycykoKHBhcmVudCwgYXJncywge2RiLCBhdXRoVXNlcn06IHtkYjogRGJDb25uZWN0aW9uLCBhdXRoVXNlcjogQXV0aFVzZXJ9LCBpbmZvOiBHcmFwaFFMUmVzb2x2ZUluZm8pID0+IHtcblx0XHRcdHJldHVybiBkYi5zZXF1ZWxpemUudHJhbnNhY3Rpb24oKHQ6IFRyYW5zYWN0aW9uKSA9PiB7XG5cdFx0XHRcdHJldHVybiBkYi5Vc2VyXG5cdFx0XHRcdFx0LmZpbmRCeUlkKGF1dGhVc2VyLmlkKVxuXHRcdFx0XHRcdC50aGVuKCh1c2VyOiBVc2VySW5zdGFuY2UpID0+IHtcblx0XHRcdFx0XHRcdHRocm93RXJyb3IoIXVzZXIsIGBVc2VyIHdpdGggaWQgJHthdXRoVXNlci5pZH0gbm90IGZvdW5kLmApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHVzZXIuZGVzdHJveSh7dHJhbnNhY3Rpb246IHR9KVxuXHRcdFx0XHRcdFx0XHQudGhlbigodXNlcikgPT4gISF1c2VyKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXHRcdH0pXG5cdH1cbn07Il19