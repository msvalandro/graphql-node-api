{"version":3,"file":"/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/dataloaders/DataLoaderFactory.ts","sources":["/home/msvalandro/Documents/repo/graphql-node-api/src/graphql/dataloaders/DataLoaderFactory.ts"],"names":[],"mappings":";;AAAA,yCAAyC;AAIzC,6CAA0C;AAG1C,6CAA0C;AAI1C;IAEC,YAAoB,EAAgB,EAAU,eAAgC;QAA1D,OAAE,GAAF,EAAE,CAAc;QAAU,oBAAe,GAAf,eAAe,CAAiB;IAE9E,CAAC;IAED,UAAU;QAET,OAAO;YACN,UAAU,EAAE,IAAI,UAAU,CACzB,CAAC,MAAiC,EAAE,EAAE,CAAC,uBAAU,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,EACxG,EAAE,UAAU,EAAE,CAAC,KAAgC,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAC/D;YACD,UAAU,EAAE,IAAI,UAAU,CACzB,CAAC,MAAiC,EAAE,EAAE,CAAC,uBAAU,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,EACxG,EAAE,UAAU,EAAE,CAAC,KAAgC,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAC/D;SACD,CAAC;IACH,CAAC;CACD;AAnBD,8CAmBC","sourcesContent":["import * as DataLoader from 'dataloader';\n\nimport { DbConnection } from '../../interfaces/DbConnectionInterface';\nimport { DataLoaders } from '../../interfaces/DataLoadersInterface';\nimport { UserLoader } from './UserLoader';\nimport { UserInstance } from '../../models/UserModel';\nimport { PostInstance } from '../../models/PostModel';\nimport { PostLoader } from './PostLoader';\nimport { RequestedFields } from '../ast/RequestedFields';\nimport { DataLoaderParam } from '../../interfaces/DataLoaderParamInterface';\n\nexport class DataLoaderFactory {\n\n\tconstructor(private db: DbConnection, private requestedFields: RequestedFields) {\n\n\t}\n\n\tgetLoaders(): DataLoaders {\n\n\t\treturn {\n\t\t\tuserLoader: new DataLoader<DataLoaderParam<number>, UserInstance>(\n\t\t\t\t(params: DataLoaderParam<number>[]) => UserLoader.batchUsers(this.db.User, params, this.requestedFields),\n\t\t\t\t{ cacheKeyFn: (param: DataLoaderParam<number[]>) => param.key }\n\t\t\t),\n\t\t\tpostLoader: new DataLoader<DataLoaderParam<number>, PostInstance>(\n\t\t\t\t(params: DataLoaderParam<number>[]) => PostLoader.batchPosts(this.db.Post, params, this.requestedFields),\n\t\t\t\t{ cacheKeyFn: (param: DataLoaderParam<number[]>) => param.key }\n\t\t\t)\n\t\t};\n\t}\n}"]}